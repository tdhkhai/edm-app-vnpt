<nz-spin [nzSpinning]="isSpinning">
  <form nz-form [formGroup]="invoiceForm" (ngSubmit)="submitInvoiceForm()">
    <nz-divider nzText="Thông tin Khách hàng" nzOrientation="center"></nz-divider>
    <div nz-row>
      <div nz-col nzSpan="12">
        <nz-form-item>
          <nz-form-label nzRequired nzFor="ComTaxCode">Mã số thuế</nz-form-label>
          <nz-form-control nzHasFeedback [nzErrorTip]="'Vui lòng nhập mã số thuế khách hàng'">
            <nz-input-group nzSearch [nzSuffix]="suffixIconSearch">
              <input type="text" nz-input formControlName="comTaxCode" id="ComTaxCode" required />
            </nz-input-group>
          </nz-form-control>
        </nz-form-item>
      </div>
    </div>
    <div nz-row>
      <div nz-col nzSpan="24">
        <nz-form-item>
          <nz-form-label nzRequired nzFor="ComName">Tên khách hàng</nz-form-label>
          <nz-form-control nzHasFeedback [nzErrorTip]="'Vui lòng nhập tên Khách hàng'">
            <nz-input-group nzSearch [nzSuffix]="suffixIconSearch">
              <input type="text" nz-input formControlName="comName" id="ComName" required />
            </nz-input-group>
          </nz-form-control>
        </nz-form-item>
      </div>
    </div>
    <nz-divider nzText="Thông tin đăng ký" nzOrientation="center"></nz-divider>
    <div nz-row>
      <div nz-col>
        <nz-form-item>
          <nz-form-label nzRequired nzFor="MonthAction">Tháng thực hiện</nz-form-label>
          <nz-form-control nzHasFeedback [nzErrorTip]="'Vui lòng chọn Tháng thực hiện'">
            <nz-date-picker nzAllowClear="false" nzMode="month" [(ngModel)]="monthAction" nzFormat="MM/yyyy"
              formControlName="monthAction" id="MonthAction"></nz-date-picker>
          </nz-form-control>
        </nz-form-item>
      </div>
    </div>
    <div nz-row>
      <div nz-col nzSpan="8">
        <nz-form-item>
          <nz-form-label nzRequired nzFor="Status">Trạng thái</nz-form-label>
          <nz-form-control nzHasFeedback [nzErrorTip]="'Vui lòng chọn Trạng thái'">
            <nz-select nzPlaceHolder="Chọn trạng thái" formControlName="status"
              (ngModelChange)="selectStatusChange($event)" id="Status">
              <nz-option [nzValue]="item.status" *ngFor="let item of listOfStatus" [nzLabel]="item.status"></nz-option>
            </nz-select>
          </nz-form-control>
        </nz-form-item>
      </div>
    </div>
    <div nz-row>
      <div nz-col nzSpan="10">
        <nz-form-item>
          <nz-form-label [nzRequired]="!isDemo" nzFor="DateDemo">Ngày tạo Demo</nz-form-label>
          <nz-form-control nzHasFeedback [nzErrorTip]="'Vui lòng chọn Ngày tạo Demo'">
            <nz-date-picker formControlName="dateDemo" style="width: 100%;" nzFormat="dd/MM/yyyy" [nzDisabled]="isDemo"
              [(ngModel)]="dateDemo" id="DateDemo"></nz-date-picker>
          </nz-form-control>
        </nz-form-item>
      </div>
    </div>
    <div nz-row>
      <div nz-col>
        <nz-form-item>
          <nz-form-label [nzRequired]="!isGolive" nzFor="DateGolive">Ngày chuyển chính thức</nz-form-label>
          <nz-form-control nzHasFeedback [nzErrorTip]="'Vui lòng chọn Ngày chuyển chính thức'">
            <nz-date-picker formControlName="dateGolive" style="width: 100%;" nzAllowClear="false" nzFormat="dd/MM/yyyy"
              [nzDisabled]="isGolive" [(ngModel)]="dateGolive" id="DateGolive">
            </nz-date-picker>
          </nz-form-control>
        </nz-form-item>
      </div>
    </div>
    <div nz-row>
      <div nz-col>
        <nz-form-item>
          <nz-form-label [nzRequired]="!isExtend" nzFor="DateExtend">Ngày chuyển gia hạn/bổ sung</nz-form-label>
          <nz-form-control nzHasFeedback [nzErrorTip]="'Vui lòng chọn Ngày chuyển bổ sung/gia hạn'">
            <nz-date-picker formControlName="dateExtend" style="width: 100%;" nzAllowClear="false" nzFormat="dd/MM/yyyy"
              [nzDisabled]="isExtend" [(ngModel)]="dateExtend" id="DateExtend">
            </nz-date-picker>
          </nz-form-control>
        </nz-form-item>
      </div>
    </div>
    <div nz-row>
      <div nz-col>
        <nz-form-item>
          <nz-form-label [nzRequired]="!isDelete" nzFor="DateDelete">Ngày hủy</nz-form-label>
          <nz-form-control nzHasFeedback [nzErrorTip]="'Vui lòng chọn Ngày yêu cầu hủy'">
            <nz-date-picker formControlName="dateDelete" style="width: 100%;" nzAllowClear="false" nzFormat="dd/MM/yyyy"
              [nzDisabled]="isDelete" [(ngModel)]="dateDelete" id="DateDelete"></nz-date-picker>
          </nz-form-control>
        </nz-form-item>
      </div>
    </div>
    <div nz-row>
      <div nz-col nzSpan="12">
        <nz-form-item>
          <nz-form-label nzRequired nzFor="Amount">Số lượng hóa đơn</nz-form-label>
          <nz-form-control nzHasFeedback [nzErrorTip]="'Vui lòng nhập số lượng hóa đơn'">
            <nz-input-group>
              <input type="text" nz-input formControlName="amount" required id="Amount" />
            </nz-input-group>
          </nz-form-control>
        </nz-form-item>
      </div>
      <!-- <div nz-col nzSpan="12">
    <span> - Doanh thu: {{ amountTemp | currency: 'VND' : ''}} VND</span>
  </div> -->
      <div nz-col nzSpan="12">
        <nz-form-item>
          <nz-form-label nzRequired nzFor="AM">AM</nz-form-label>
          <nz-form-control nzHasFeedback [nzErrorTip]="'Vui lòng chọn AM phát triển'">
            <nz-select [compareWith]="compareByOptionId" nzAllowClear nzPlaceHolder="Chọn AM phát triển" formControlName="am" id="AM">
              <nz-option [nzValue]="item" *ngFor="let item of listOfUser" [nzLabel]="item.userName">
              </nz-option>
            </nz-select>
          </nz-form-control>
        </nz-form-item>
      </div>
    </div>
  </form>

  <div *nzModalFooter>
    <button nz-button nzType="default" (click)="close()">Hủy</button>
    <button nz-button nzType="primary" (click)="submitInvoiceForm()">Cập nhật</button>
  </div>

</nz-spin>

<ng-template #suffixIconSearch>
  <i nz-icon nzType="search"></i>
</ng-template>
